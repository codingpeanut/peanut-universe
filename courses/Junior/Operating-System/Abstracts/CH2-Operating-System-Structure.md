# Operating System Structure

**一、作業系統服務 (Operating System Services)**

*   **重點整理:** 作業系統提供使用者和程式多種服務，以利於使用和執行。這些服務可分為兩大類：
    *   **使用者導向服務:**
        *   **使用者介面 (User interface):** 提供使用者與作業系統互動的方式，例如命令列介面 (CLI)、圖形使用者介面 (GUI) 和觸控螢幕介面。
        *   **程式執行 (Program execution):** 載入程式到記憶體中執行，並處理正常或異常終止。
        *   **輸入/輸出操作 (I/O operations):** 處理程式與檔案或裝置之間的輸入/輸出操作。
        *   **檔案系統操作 (File-system manipulation):** 提供檔案和目錄的建立、刪除、讀取、寫入、搜尋、列出資訊和權限管理等功能。
        *   **通訊 (Communications):** 讓行程在同一台電腦或透過網路在不同電腦之間交換資訊，可透過共享記憶體或訊息傳遞 (封包) 進行。
        *   **錯誤偵測 (Error detection):** 持續監控系統中可能發生的錯誤，例如 CPU、記憶體、I/O 裝置和使用者程式中的錯誤，並採取適當的措施確保系統正常運作。
    *   **系統導向服務:**
        *   **資源分配 (Resource allocation):** 當多個使用者或多個工作同時執行時，作業系統必須分配資源給每個使用者或工作，例如 CPU 週期、主記憶體、檔案儲存空間和 I/O 裝置。
        *   **記錄 (Logging):** 追蹤每個使用者使用電腦資源的種類、數量和時間。
        *   **保護和安全 (Protection and security):** 保護系統資源的存取控制，防止未經授權的存取和惡意攻擊。
*   **考題預測:**
    *   作業系統提供哪些使用者導向服務？
    *   作業系統如何進行錯誤偵測和處理？
    *   資源分配在作業系統中扮演什麼角色？
    *   作業系統如何保護系統安全？

**二、系統呼叫 (System Calls)**

*   **重點整理:** 系統呼叫是程式用來請求作業系統服務的介面。
    *   通常以高階語言 (C 或 C++) 撰寫。
    *   程式通常透過應用程式介面 (API) 使用系統呼叫，而不是直接使用系統呼叫。
        *   使用 API 的優點是可以簡化程式開發，並提高程式碼的可移植性。
        *   常用的 API 包括 Windows 的 Win32 API、POSIX 系統的 POSIX API 和 Java 虛擬機器的 Java API。
    *   系統呼叫的實作通常涉及以下步驟：
        *   每個系統呼叫都有一個編號。
        *   系統呼叫介面維護一個索引表，根據編號查找對應的系統呼叫。
        *   系統呼叫介面呼叫作業系統核心中的相應函數，並返回系統呼叫的狀態和返回值。
        *   呼叫者只需要遵守 API，並了解作業系統將執行的操作，而不需要了解系統呼叫的具體實作細節。
    *   系統呼叫的參數傳遞方式有三種：
        *   使用暫存器傳遞參數。
        *   將參數儲存在記憶體區塊中，並將區塊的地址作為參數傳遞。
        *   將參數壓入堆疊，由作業系統從堆疊中取出。
    *   常見的系統呼叫類型包括：
        *   **行程控制 (Process control):** 例如建立行程、終止行程、等待事件等。
        *   **檔案管理 (File management):** 例如建立檔案、刪除檔案、讀取檔案等。
        *   **裝置管理 (Device management):** 例如請求裝置、釋放裝置、讀取裝置等。
        *   **資訊維護 (Information maintenance):** 例如取得時間、設定時間、取得系統資料等。
        *   **通訊 (Communications):** 例如建立通訊連線、發送訊息、接收訊息等。
        *   **保護 (Protection):** 例如控制資源的存取權限、設定權限等。
*   **考題預測:**
    *   系統呼叫的定義和用途是什麼？
    *   系統呼叫和 API 之間的關係？
    *   系統呼叫參數傳遞的三種方式？
    *   試舉例說明不同類型的系統呼叫？

**三、系統程式 (System Programs)**

*   **重點整理:** 系統程式提供使用者一個方便的環境來開發和執行程式，它們可以分為以下幾類：
    *   **檔案操作 (File manipulation):** 處理檔案和目錄的建立、刪除、複製、重新命名、列印和傾印等操作。
    *   **狀態資訊 (Status information):** 顯示系統的狀態資訊，例如日期、時間、可用記憶體量、磁碟空間和使用者數量。
    *   **程式語言支援 (Programming language support):** 提供編譯器、組譯器、除錯器和直譯器等工具。
    *   **程式載入和執行 (Program loading and execution):** 負責將程式載入到記憶體中並執行，例如絕對載入器、可重定位載入器、連結編輯器和覆蓋載入器。
    *   **通訊 (Communications):** 提供行程、使用者和電腦系統之間建立虛擬連線的機制，例如允許使用者傳送訊息、瀏覽網頁、發送電子郵件、遠端登入和傳輸檔案等。
    *   **背景服務 (Background services):** 在開機時啟動，提供磁碟檢查、行程排程、錯誤記錄和列印等服務。
    *   **應用程式 (Application programs):** 由使用者執行，不屬於作業系統的一部分。
*   **考題預測:**
    *   系統程式的定義和主要功能？
    *   連結器和載入器的作用？
    *   應用程式為何具有作業系統專屬性？

**四、作業系統設計與實作 (Design and Implementation)**

*   **重點整理:** 作業系統的設計與實作是一個具有挑戰性的軟體工程任務，需要考慮以下因素：
    *   硬體平台
    *   系統類型
    *   使用者需求
    *   系統需求
    *   **使用者目標:** 作業系統應易於使用、學習、可靠、安全和快速。
    *   **系統目標:** 作業系統應易於設計、實作、維護、靈活、可靠、無錯誤和高效。
    *   作業系統的結構可以採用以下幾種方式：
        *   **單一結構 (Simple structure):** 例如 MS-DOS。
        *   **單體結構 (Monolithic structure):** 例如早期的 UNIX。
        *   **分層結構 (Layered approach):** 將作業系統分為多個層次，每個層次都建立在較低層次之上。
        *   **微核心結構 (Microkernel):** 將大部分作業系統功能移至使用者空間，例如 Mach 和 macOS 的核心。
        *   **模組化結構 (Modules):** 使用可載入核心模組 (LKM) 來動態載入功能，例如 Linux 和 Solaris。
        *   **混合結構 (Hybrid systems):** 結合多種架構來滿足效能、安全性和可用性需求，例如 Linux、Solaris、Windows 和 macOS。
    *   作業系統的實作可以使用以下幾種語言：
        *   組合語言
        *   系統程式語言 (例如 Algol、PL/1)
        *   高階語言 (例如 C、C++)
        *   通常會混合使用多種語言，例如最低層次使用組合語言，主體使用 C 語言，系統程式使用 C、C++ 或腳本語言 (例如 Perl、Python 和 shell 腳本)。
*   **考題預測:**
    *   作業系統設計需要考慮哪些因素？
    *   作業系統的結構類型有哪些？各自的優缺點？
    *   作業系統實作常用的程式語言？

**五、作業系統除錯 (Operating-System Debugging)**

*   **重點整理:** 作業系統除錯是指找出和修正作業系統中的錯誤，以及調整系統效能。
    *   作業系統會產生記錄檔、核心傾印檔和當機傾印檔來協助除錯。
    *   效能調整可以使用追蹤和效能分析工具來找出系統瓶頸，並進行最佳化。
    *   常用的追蹤工具包括 strace、gdb、perf 和 tcpdump。
    *   BCC (BPF Compiler Collection) 是一個功能豐富的工具包，提供 Linux 的追蹤功能。
*   **考題預測:**
    *   作業系統除錯常用的工具和技術？
    *   效能調整的方法？


**六、開機程序 (Booting)**

*   **重點整理:** 開機程序是指電腦啟動時載入作業系統的過程。
    *   開機載入程式 (bootstrap loader) 是一個小程式，負責找到核心，將其載入到記憶體中，並啟動它。
    *   開機載入程式通常儲存在 ROM 或 EEPROM 中。
    *   現代系統使用 UEFI (Unified Extensible Firmware Interface) 取代 BIOS。
    *   GRUB 是一種常用的開機載入程式，允許從多個磁碟、版本和核心選項中選擇核心。
*   **考題預測:**
    *   開機程序的步驟？
    *   開機載入程式的作用？
    *   BIOS 和 UEFI 的區別？

**七、其他重點**

*   **使用者介面:** 命令列介面 (CLI) 和圖形使用者介面 (GUI) 的特點和差異。
*   **虛擬機器:** 虛擬機器 (VM) 的概念和優點。
*   **Android 架構:** Android 作業系統的架構，包含 Linux 核心、執行環境、函式庫和應用程式。
